define("bower-libs/pagedown-ace/Markdown.Converter",function(){}),function(){function e(){}function n(e,n){this.buttonBar=u.getElementById("wmd-button-bar"+e),this.preview=u.getElementById("wmd-preview"+e),this.input=n}function t(n){var t=this,r=n.input;this.init=function(){var e=ace.require("ace/range").Range;!function(n){t.before=r.session.getTextRange(new e(0,0,n.start.row,n.start.column)),t.selection=r.session.getTextRange(),t.after=r.session.getTextRange(new e(n.end.row,n.end.column,Number.MAX_VALUE,Number.MAX_VALUE))}(r.selection.getRange()),this.text=[this.before,this.selection,this.after].join(""),this.length=this.text.length,this.setInputAreaSelectionStartEnd(),this.scrollTop=r.renderer.getScrollTop()},this.setInputAreaSelection=function(){var e=ace.require("ace/range").Range;r.selection.setSelectionRange(function(n,t){return new e(n.row,n.column,t.row,t.column)}(r.session.doc.indexToPosition(t.start),r.session.doc.indexToPosition(t.end))),r.renderer.scrollToY(t.scrollTop),r.focus()},this.setInputAreaSelectionStartEnd=function(){t.start=t.before.length,t.end=t.after.length},this.restore=function(){for(var e=0,n=t.before.length;n>e&&t.before.charCodeAt(e)===t.text.charCodeAt(e);)e++;for(var a=0,i=t.after.length,o=t.after.length-1,s=t.text.length-1;i>a&&t.after.charCodeAt(o-a)===t.text.charCodeAt(s-a);)a++;var l=ace.require("ace/range").Range,c=function(e,n){return new l(e.row,e.column,n.row,n.column)}(r.session.doc.indexToPosition(e),r.session.doc.indexToPosition(t.length-a));r.session.replace(c,t.text.substring(e,s-a+1)),this.setInputAreaSelection()},this.getChunks=function(){var n=new e;return n.before=t.before,n.startTag="",n.selection=t.selection,n.endTag="",n.after=t.after,n.scrollTop=t.scrollTop,n},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function r(e,n,t,r){var a,i,o,s=3e3,c="delayed",d=function(){var e=0;return window.innerHeight?e=window.pageYOffset:u.documentElement&&u.documentElement.scrollTop?e=u.documentElement.scrollTop:u.body&&(e=u.body.scrollTop),e},p=function(){if(n.preview){var t=n.input.getValue();if(!t||t!=o){o=t;var r=(new Date).getTime();t=e.makeHtml(t);var a=(new Date).getTime();i=a-r,C(t)}}};void 0!==r&&(p=r(p));var f=function(){if(a&&(clearTimeout(a),a=void 0),"manual"!==c){var e=0;"delayed"===c&&(e=i),e>s&&(e=s),a=setTimeout(p,e)}},g=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},h=function(){n.preview&&(n.preview.scrollTop=(n.preview.scrollHeight-n.preview.clientHeight)*g(n.preview))};this.refresh=function(e){e?(o="",p()):f()},this.processingTime=function(){return i};var v,b=!0,w=function(e){var t=n.preview,r=t.parentNode,a=t.nextSibling;r.removeChild(t),t.innerHTML=e,a?r.insertBefore(t,a):r.appendChild(t)},x=function(e){n.preview.innerHTML=e},y=function(e){if(v)return v(e);try{x(e),v=x}catch(n){(v=w)(e)}},C=function(e){var r=l.getTop(n.input)-d();if(n.preview&&(y(e),t()),h(),b)return void(b=!1);var a=l.getTop(n.input)-d();m.isIE?setTimeout(function(){window.scrollBy(0,a-r)},0):window.scrollBy(0,a-r)},k=function(){n.input.session.on("change",f),n.preview&&(n.preview.scrollTop=0)};k()}function a(e,n,r,a,i,o,s,l){function c(e){if(0!==e.length){var n=e.pop();x.commands.addCommand({name:s(n),bindKey:h[n],exec:function(){p(y[n])}}),c(e)}}function d(e,i,o){x.focus(),r&&r.setCommandMode();var s=new t(n);if(s){var l=s.getChunks(),c=function(){x.focus(),l&&s.setChunks(l),s.restore(),a.refresh()},u=w.insertLink(l,c,e,i,o);u||c()}}function p(e){x.focus();var i="wmd-link-button"==e.id||"wmd-image-button"==e.id;if(e.textOp){r&&!i&&r.setCommandMode();var o=new t(n);if(!o)return;var s=o.getChunks(),l=function(){x.focus(),s&&o.setChunks(s),o.restore(),a.refresh()},c=e.textOp(s,l);c||l()}e.execute&&e.execute(r)}function f(e,t){var r="0px",a="-20px",i="-40px",o=e.getElementsByTagName("span")[0];e.className=e.className.replace(/ disabled/g,""),t?(o.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){o.style.backgroundPosition=this.XShift+" "+i},e.onmouseout=function(){o.style.backgroundPosition=this.XShift+" "+r},m.isIE&&(e.onmousedown=function(){u.activeElement&&u.activeElement!==n.input||(n.ieCachedRange=document.selection.createRange(),n.ieCachedScrollTop=n.input.renderer.getScrollTop())}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),p(this),!1})):(o.style.backgroundPosition=e.XShift+" "+a,e.onmouseover=e.onmouseout=e.onclick=function(){},e.className+=" disabled")}function g(e){return"string"==typeof e&&(e=i[e]),function(){e.apply(i,arguments)}}function v(){var t=n.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+e,r.className="wmd-button-row",r=t.appendChild(r);var a=0,i=function(n,t,i,o){var s=document.createElement("li");s.className="wmd-button",s.style.left=a+"px",a+=25;var l=document.createElement("span");return s.id=n+e,s.appendChild(l),s.title=t,s.XShift=i,o&&(s.textOp=o),f(s,!0),r.appendChild(s),s};if(y.bold=i("wmd-bold-button",b("bold"),"0px",g("doBold")),y.italic=i("wmd-italic-button",b("italic"),"-20px",g("doItalic")),y.link=i("wmd-link-button",b("link"),"-40px",g(function(e,n){return this.doLinkOrImage(e,n,!1)})),y.quote=i("wmd-quote-button",b("quote"),"-60px",g("doBlockquote")),y.code=i("wmd-code-button",b("code"),"-80px",g("doCode")),y.image=i("wmd-image-button",b("image"),"-100px",g(function(e,n){return this.doLinkOrImage(e,n,!0)})),y.olist=i("wmd-olist-button",b("olist"),"-120px",g(function(e,n){this.doList(e,n,!0)})),y.ulist=i("wmd-ulist-button",b("ulist"),"-140px",g(function(e,n){this.doList(e,n,!1)})),y.heading=i("wmd-heading-button",b("heading"),"-160px",g("doHeading")),y.hr=i("wmd-hr-button",b("hr"),"-180px",g("doHorizontalRule")),y.undo=i("wmd-undo-button",b("undo"),"-200px",null),y.undo.execute=function(){x.session.getUndoManager().undo()},y.redo=i("wmd-redo-button",b("redo"),"-220px",null),y.redo.execute=function(){x.session.getUndoManager().redo()},o){var l=document.createElement("li"),c=document.createElement("span");l.appendChild(c),l.className="wmd-button wmd-help-button",l.id="wmd-help-button"+e,l.XShift="-240px",l.isHelp=!0,l.style.right="0px",l.title=s("help"),l.onclick=o.handler,f(l,!0),r.appendChild(l),y.help=l}C.setUndoRedoButtonStates(),x.session.on("change",function(){C.setUndoRedoButtonStates()})}var b=function(e){return s(e)+" "+l(e)},x=n.input,y={};this.setUndoRedoButtonStates=function(){setTimeout(function(){f(y.undo,x.session.getUndoManager().hasUndo()),f(y.redo,x.session.getUndoManager().hasRedo())},50)};var C=this;v();var k="keydown";m.isOpera&&(k="keypress"),c(["bold","italic","link","quote","code","image","olist","ulist","heading","hr"]),MD.insertLink=d,MD.insertLink2=d,this.buttons=y,this.setButtonState=f}function i(e,n){this.hooks=e,this.getString=n}function o(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,n,t){return n=n.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),n=decodeURIComponent(n),n=encodeURI(n).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),n=n.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),t&&(t=t.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),t?n+' "'+t+'"':n})}var s={},l={},c={},u=window.document,d=window.RegExp,p=window.navigator,f={lineLength:72},m={isIE:/msie/.test(p.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(p.userAgent.toLowerCase())||/msie 5/.test(p.userAgent.toLowerCase()),isOpera:/opera/.test(p.userAgent.toLowerCase())},g={bold:getMsg("Strong")+" <strong>",boldexample:getMsg("strong text"),italic:getMsg("Emphasis")+" <em>",italicexample:getMsg("emphasized text"),link:getMsg("Hyperlink")+" <a>",linkdescription:getMsg("enter link description here"),linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:getMsg("Blockquote")+" <blockquote>",quoteexample:getMsg("Blockquote"),code:getMsg("Code Sample")+" <pre><code>",codeexample:getMsg("enter code here"),image:getMsg("Image")+" <img>",imagedescription:getMsg("enter image description here"),imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:getMsg("Numbered List")+" <ol>",ulist:getMsg("Bulleted List")+" <ul>",litem:getMsg("List item"),heading:getMsg("Heading")+" <h1>/<h2>",headingexample:getMsg("Heading"),hr:getMsg("Horizontal Rule")+" <hr>",undo:getMsg("Undo")+" -",redo:getMsg("Redo")+" -",help:"Markdown Editing Help"},h={bold:{win:"Ctrl-B",mac:"Command-B|Ctrl-B"},italic:{win:"Ctrl-I",mac:"Command-I|Ctrl-I"},link:{win:"Ctrl-L",mac:"Command-L|Ctrl-L"},quote:{win:"Ctrl-Q",mac:"Command-Q|Ctrl-Q"},code:{win:"Ctrl-K",mac:"Command-K|Ctrl-K"},image:{win:"Ctrl-G",mac:"Command-G|Ctrl-G"},olist:{win:"Ctrl-O",mac:"Command-O|Ctrl-O"},ulist:{win:"Ctrl-U",mac:"Command-U|Ctrl-U"},heading:{win:"Ctrl-H",mac:"Command-H|Ctrl-H"},hr:{win:"Ctrl-R",mac:"Command-R|Ctrl-R"},undo:{win:"Ctrl-Z",mac:"Command-Z"},redo:{win:"Ctrl-Y|Ctrl-Shift-Z",mac:"Command-Y|Command-Shift-Z"}},v="http://",b="http://";Markdown.Editor=function(e,t,o){if(o=o||{},"function"==typeof o.handler&&(o={helpButton:o}),o.strings=o.strings||{},o.helpButton&&(o.strings.help=o.strings.help||o.helpButton.title),o.keyStrokes)for(var s in o.keyStrokes)h[s]=o.keyStrokes[s];var l=function(e){return o.strings[e]||g[e]};t=t||"";var c=this.hooks=new Markdown.HookCollection;c.addNoop("onPreviewRefresh"),c.addNoop("postBlockquoteCreation"),c.addFalse("insertImageDialog"),c.addFalse("insertLinkDialog"),this.getConverter=function(){return e};var u,d,p=this;this.run=function(s,f){if(!u){u=new n(t,s);var m,g=new i(c,l),v=new r(e,u,function(){c.onPreviewRefresh()},f),b=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),w="mac"==b,x=function(e){var n=h[e][w?"mac":"win"],t=n.indexOf("|");return n.substring(0,t>0?t:n.length)};m=new a(t,u,d,v,g,o.helpButton,l,x),m.setUndoRedoButtonStates();var y=p.refreshPreview=function(){v.refresh(!0)};y(),p.uiManager=m}}},e.prototype.findTags=function(e,n){var t,r=this;e&&(t=s.extendRegExp(e,"","$"),this.before=this.before.replace(t,function(e){return r.startTag=r.startTag+e,""}),t=s.extendRegExp(e,"^",""),this.selection=this.selection.replace(t,function(e){return r.startTag=r.startTag+e,""})),n&&(t=s.extendRegExp(n,"","$"),this.selection=this.selection.replace(t,function(e){return r.endTag=e+r.endTag,""}),t=s.extendRegExp(n,"^",""),this.after=this.after.replace(t,function(e){return r.endTag=e+r.endTag,""}))},e.prototype.trimWhitespace=function(e){var n,t,r=this;e?n=t="":(n=function(e){return r.before+=e,""},t=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,n).replace(/(\s*)$/,t)},e.prototype.skipLines=function(e,n,t){void 0===e&&(e=1),void 0===n&&(n=1),e++,n++;var r,a;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+d.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+d.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+d.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+d.$1,this.before){for(r=a="";e--;)r+="\\n?",a+="\n";t&&(r="\\n*"),this.before=this.before.replace(new d(r+"$",""),a)}if(this.after){for(r=a="";n--;)r+="\\n?",a+="\n";t&&(r="\\n*"),this.after=this.after.replace(new d(r,""),a)}},s.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},s.addEvent=function(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener(n,t,!1)},s.removeEvent=function(e,n,t){e.detachEvent?e.detachEvent("on"+n,t):e.removeEventListener(n,t,!1)},s.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n")},s.extendRegExp=function(e,n,t){(null===n||void 0===n)&&(n=""),(null===t||void 0===t)&&(t="");var r,a=e.toString();return a=a.replace(/\/([gim]*)$/,function(e,n){return r=n,""}),a=a.replace(/(^\/|\/$)/g,""),a=n+a+t,new d(a,r)},l.getTop=function(e,n){var t=e.offsetTop;if(!n)for(;e=e.offsetParent;)t+=e.offsetTop;return t},l.getHeight=function(e){return e.offsetHeight||e.scrollHeight},l.getWidth=function(e){return e.offsetWidth||e.scrollWidth},l.getPageSize=function(){var e,n,t,r;self.innerHeight&&self.scrollMaxY?(e=u.body.scrollWidth,n=self.innerHeight+self.scrollMaxY):u.body.scrollHeight>u.body.offsetHeight?(e=u.body.scrollWidth,n=u.body.scrollHeight):(e=u.body.offsetWidth,n=u.body.offsetHeight),self.innerHeight?(t=self.innerWidth,r=self.innerHeight):u.documentElement&&u.documentElement.clientHeight?(t=u.documentElement.clientWidth,r=u.documentElement.clientHeight):u.body&&(t=u.body.clientWidth,r=u.body.clientHeight);var a=Math.max(e,t),i=Math.max(n,r);return[a,i,t,r]},c.createBackground=function(){var e=u.createElement("div"),n=e.style;e.className="wmd-prompt-background",n.position="absolute",n.top="0",n.zIndex="1000",m.isIE?n.filter="alpha(opacity=50)":n.opacity="0.5";var t=l.getPageSize();return n.height=t[1]+"px",m.isIE?(n.left=u.documentElement.scrollLeft,n.width=u.documentElement.clientWidth):(n.left="0",n.width="100%"),u.body.appendChild(e),e},c.prompt=function(e,n,t){var r,a;void 0===n&&(n="");var i=function(e){var n=e.charCode||e.keyCode;27===n&&o(!0)},o=function(e){s.removeEvent(u.body,"keydown",i);var n=a.value;return e?n=null:(n=n.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(n)||(n="http://"+n)),r.parentNode.removeChild(r),t(n),!1},c=function(){r=u.createElement("div"),r.className="wmd-prompt-dialog",r.style.padding="10px;",r.style.position="fixed",r.style.width="400px",r.style.zIndex="1001";var t=u.createElement("div");t.innerHTML=e,t.style.padding="5px",r.appendChild(t);var c=u.createElement("form"),d=c.style;c.onsubmit=function(){return o(!1)},d.padding="0",d.margin="0",d.cssFloat="left",d.width="100%",d.textAlign="center",d.position="relative",r.appendChild(c),a=u.createElement("input"),a.type="text",a.value=n,d=a.style,d.display="block",d.width="80%",d.marginLeft=d.marginRight="auto",c.appendChild(a);var p=u.createElement("input");p.type="button",p.onclick=function(){return o(!1)},p.value="OK",d=p.style,d.margin="10px",d.display="inline",d.width="7em";var f=u.createElement("input");f.type="button",f.onclick=function(){return o(!0)},f.value="Cancel",d=f.style,d.margin="10px",d.display="inline",d.width="7em",c.appendChild(p),c.appendChild(f),s.addEvent(u.body,"keydown",i),r.style.top="50%",r.style.left="50%",r.style.display="block",m.isIE_5or6&&(r.style.position="absolute",r.style.top=u.documentElement.scrollTop+200+"px",r.style.left="50%"),u.body.appendChild(r),r.style.marginTop=-(l.getHeight(r)/2)+"px",r.style.marginLeft=-(l.getWidth(r)/2)+"px"};setTimeout(function(){c();var e=n.length;if(void 0!==a.selectionStart)a.selectionStart=0,a.selectionEnd=e;else if(a.createTextRange){var t=a.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}a.focus()},0)};var w=i.prototype;w.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",w.unwrap=function(e){var n=new d("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(n,"$1 $2")},w.wrap=function(e,n){this.unwrap(e);var t=new d("(.{1,"+n+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(t,function(e,n){return new d("^"+r.prefixes,"").test(e)?e:n+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},w.doBold=function(e,n){return this.doBorI(e,n,2,this.getString("boldexample"))},w.doItalic=function(e,n){return this.doBorI(e,n,1,this.getString("italicexample"))},w.doBorI=function(e,n,t,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var a=/(\**$)/.exec(e.before)[0],i=/(^\**)/.exec(e.after)[0],o=Math.min(a.length,i.length);if(o>=t&&(2!=o||1!=t))e.before=e.before.replace(d("[*]{"+t+"}$",""),""),e.after=e.after.replace(d("^[*]{"+t+"}",""),"");else if(!e.selection&&i){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=d.$1;e.before=e.before+i+s}else{e.selection||i||(e.selection=r);var l=1>=t?"*":"**";e.before=e.before+l,e.after=l+e.after}},w.stripLinkDefs=function(e,n){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,t,r,a,i){return n[t]=e.replace(/\s*$/,""),a?(n[t]=e.replace(/["(](.+?)[")]$/,""),a+i):""})},w.addLinkDef=function(e,n){var t=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var a="",i=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(e){t++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+t+"]:"),a+="\n"+e},s=function(e,n,a,l,c,u){return a=a.replace(i,s),r[c]?(o(r[c]),n+a+l+t+u):e};e.before=e.before.replace(i,s),n?o(n):e.selection=e.selection.replace(i,s);var l=t;return e.after=e.after.replace(i,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+a,l
},w.insertLink=function(e,n,t,r,a){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var i;if(!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var s=function(t){i.parentNode.removeChild(i),null!==t&&(e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e.startTag=a?"![":"[",e.endTag="]("+o(t)+")",e.selection=r),n()};return i=c.createBackground(),s(t),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},w.doLinkOrImage=function(e,n,t){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\(.*?\))?/);var r;if(!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var a=this,i=function(i,s){if(r.parentNode.removeChild(r),null!==i&&(e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e.startTag=t?"![":"[",e.endTag="]("+o(i)+")",!e.selection)){var l="";l=s?s:a.getString(t?"imagedescription":"linkdescription"),e.selection=l}n()};return r=c.createBackground(),t?this.hooks.insertImageDialog(i)||c.prompt(this.getString("imagedialog"),v,i):this.hooks.insertLinkDialog(i)||c.prompt(this.getString("linkdialog"),b,i),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},w.doAutoindent=function(e){var n=this,t=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,function(n){return e.selection=n,""}),t=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),t&&(e.after=e.selection+e.after,e.selection="")},w.doBlockquote=function(e){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(n,t,r,a){return e.before+=t,e.after=a+e.after,r}),e.before=e.before.replace(/(>[ \t]*)$/,function(n,t){return e.selection=t+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n,t="",r="";if(e.before){for(var a=e.before.replace(/\n$/,"").split("\n"),i=!1,o=0;o<a.length;o++){var s=!1;n=a[o],i=i&&n.length>0,/^>/.test(n)?(s=!0,!i&&n.length>1&&(i=!0)):s=/^[ \t]*$/.test(n)?!0:i,s?t+=n+"\n":(r+=t+n,t="\n")}/(^|\n)>/.test(t)||(r+=t,t="")}e.startTag=t,e.before=r;var l=function(n){var t=n?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,f.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),l(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),l(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(n,t){return e.startTag+=t,""}))},w.doCode=function(e){var n=/\S[ ]*$/.test(e.before),t=/^[ ]*\S/.test(e.after);if(!t&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(n){return e.selection=n+e.selection,""});var r=1,a=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(r=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(a=0),e.skipLines(r,a),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(e.startTag="    ",e.selection=this.getString("codeexample"))}else e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample")))},w.doList=function(e,n,t){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,a=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,i="-",o=1,s=function(){var e;return t?(e=" "+o+". ",o++):e=" "+i+" ",e},l=function(e){return void 0===t&&(t=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return s()})};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(a,l)),t==c)return}var u=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(i=d.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var p=s(),m=1;e.after=e.after.replace(a,function(e){return m=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(u,m,!0),e.startTag=p;var g=p.replace(/./g," ");this.wrap(e,f.lineLength-g.length),e.selection=e.selection.replace(/\n/g,"\n"+g)},w.doHeading=function(e){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.before&&"\n"!=e.before[e.before.length-1]&&e.skipLines(1,1),e.startTag="# ",e.selection=this.getString("headingexample"),void(e.endTag="");e.findTags(/#+[ ]*/,/[ ]*#+/),e.before&&"\n"!=e.before[e.before.length-1]&&e.skipLines(1,1);var n=0,t=e.startTag;/^#+[ ]*$/.test(t)&&(t=t.replace(/ /g,""),n=t.length);var r=0;if(n>=0&&3>=n&&(r=n+1),n>=4&&(r=0,e.startTag=""),r>0){for(var a="";r--;)a+="#";a+=" ",e.startTag=a}},w.doHorizontalRule=function(e){e.startTag="----------\n",e.selection="",e.skipLines(1,1,!0)}}(),define("pagedown-ace",function(){}),function(){function e(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/\s+$/g,"")}function t(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function r(e,n){return-1!=e.indexOf(n)}function a(e,n){return e.replace(/<[^>]*>?/gi,function(e){return e.match(n)?e:""})}function i(e,n){for(var t={},r=0;r<e.length;r++)t[e[r]]=e[r];for(r=0;r<n.length;r++)t[n[r]]=n[r];var a=[];for(var i in t)t.hasOwnProperty(i)&&a.push(t[i]);return a}function o(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function s(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function l(e,n){return a(c(e,n),g)}function c(e,n){var t=n.blockGamutHookCallback(e);return t=p(t),t=t.replace(/~D/g,"$$").replace(/~T/g,"~"),t=n.previousPostConversion(t)}function u(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function d(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}function p(e){return e=e.replace(/~E(\d+)E/g,function(e,n){var t=parseInt(n);return String.fromCharCode(t)})}function f(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function m(e,n){var t=n;return t=t.replace(/&\#8220;/g,'"'),t=t.replace(/&\#8221;/g,'"'),t=t.replace(/&\#8216;/g,"'"),t=t.replace(/&\#8217;/g,"'"),t=t.replace(/&\#8212;/g,"---"),t=t.replace(/&\#8211;/g,"--"),t=t.replace(/&\#8230;/g,"...")}var g=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(e){for(var n=0;n<this.length;n++)if(this[n]==e)return n;return-1}),Markdown.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},Markdown.Extra.init=function(e,n){var t=new Markdown.Extra,a=[],i=[],o=[],s=["unHashExtraBlocks"];return n=n||{},n.extensions=n.extensions||["all"],r(n.extensions,"all")&&(n.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),i.push("wrapHeaders"),r(n.extensions,"attr_list")&&(a.push("hashFcbAttributeBlocks"),i.push("hashHeaderAttributeBlocks"),s.push("applyAttributeBlocks"),t.attributeBlocks=!0),r(n.extensions,"fenced_code_gfm")&&(i.push("fencedCodeBlocks"),a.push("fencedCodeBlocks")),r(n.extensions,"tables")&&i.push("tables"),r(n.extensions,"def_list")&&i.push("definitionLists"),r(n.extensions,"footnotes")&&(a.push("stripFootnoteDefinitions"),i.push("doFootnotes"),s.push("printFootnotes")),r(n.extensions,"smartypants")&&s.push("runSmartyPants"),r(n.extensions,"strikethrough")&&o.push("strikethrough"),r(n.extensions,"newlines")&&o.push("newlines"),e.hooks.chain("postNormalization",function(e){return t.doTransform(a,e)+"\n"}),e.hooks.chain("preBlockGamut",function(e,n){return t.blockGamutHookCallback=n,e=u(e),e=t.doTransform(i,e)+"\n",e=d(e)}),e.hooks.chain("postSpanGamut",function(e){return t.doTransform(o,e)}),t.previousPostConversion=e.hooks.postConversion,e.hooks.chain("postConversion",function(e){return e=t.doTransform(s,e),t.hashBlocks=[],t.footnotes={},t.usedFootnotes=[],e}),"highlighter"in n&&(t.googleCodePrettify="prettify"===n.highlighter,t.highlightJs="highlight"===n.highlighter),"table_class"in n&&(t.tableClass=n.table_class),t.converter=e,t},Markdown.Extra.prototype.doTransform=function(e,n){for(var t=0;t<e.length;t++)n=this[e[t]](n);return n},Markdown.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},Markdown.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"},Markdown.Extra.prototype.unHashExtraBlocks=function(e){function n(){var r=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(e,n){r=!0;var a=parseInt(n,10);return t.hashBlocks[a]}),r===!0&&n()}var t=this;return n(),e},Markdown.Extra.prototype.wrapHeaders=function(e){function n(e){return"\n"+e+"\n"}return e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,n),e=e.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,n),e=e.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,n)};var h="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",v=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+h+"[ \\t]*(?:\\n|0x03)","gm"),b=new RegExp("^(.*)[ \\t]+"+h+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),w=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+h+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(e){function n(e,n,r){return"<p>~XX"+(t.hashBlocks.push(r)-1)+"XX</p>\n"+n+"\n"}var t=this;return e=e.replace(v,n),e=e.replace(b,n)},Markdown.Extra.prototype.hashFcbAttributeBlocks=function(e){function n(e,n,r){return"<p>~XX"+(t.hashBlocks.push(r)-1)+"XX</p>\n"+n+"\n"}var t=this;return e.replace(w,n)},Markdown.Extra.prototype.applyAttributeBlocks=function(e){var n=this,t=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(t,function(e,t,r,a,o){if(!r)return"";for(var s=parseInt(t,10),l=n.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",d=l.match(/\.[^\s#.]+/g)||[],p=0;p<d.length;p++)d[p]=d[p].substr(1,d[p].length-1);var f="";return a&&(d=i(d,[a])),d.length>0&&(f=' class="'+d.join(" ")+'"'),"<"+r+u+f+o})},Markdown.Extra.prototype.tables=function(n){function t(n,t,a,i){t=t.replace(/^ *[|]/m,""),a=a.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/gm,""),t=t.replace(/[|] *$/m,""),a=a.replace(/[|] *$/m,""),i=i.replace(/[|] *$/gm,""),alignspecs=a.split(/ *[|] */),align=[];for(var o=0;o<alignspecs.length;o++){var s=alignspecs[o];align[o]=s.match(/^ *-+: *$/m)?' style="text-align:right;"':s.match(/^ *:-+: *$/m)?' style="text-align:center;"':s.match(/^ *:-+ *$/m)?' style="text-align:left;"':""}var c=t.split(/ *[|] */),u=c.length,d=r.tableClass?' class="'+r.tableClass+'"':"",p=["<table",d,">\n","<thead>\n","<tr>\n"].join("");for(o=0;u>o;o++){var f=l(e(c[o]),r);p+=["  <th",align[o],">",f,"</th>\n"].join("")}p+="</tr>\n</thead>\n";var m=i.split("\n");for(o=0;o<m.length;o++)if(!m[o].match(/^\s*$/)){for(var g=m[o].split(/ *[|] */),h=u-g.length,v=0;h>v;v++)g.push("");for(p+="<tr>\n",v=0;u>v;v++){var b=l(e(g[v]),r);p+=["  <td",align[v],">",b,"</td>\n"].join("")}p+="</tr>\n"}return p+="</table>\n",r.hashExtraBlock(p)}var r=this,a=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),i=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return n=n.replace(a,t),n=n.replace(i,t)},Markdown.Extra.prototype.stripFootnoteDefinitions=function(e){var n=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(e,t,r){return t=f(t),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),n.footnotes[t]=r,"\n"})},Markdown.Extra.prototype.doFootnotes=function(e){var n=this;if(n.isConvertingFootnote===!0)return e;var t=0;return e=e.replace(/\[\^(.+?)\]/g,function(e,r){var a=f(r),i=n.footnotes[a];if(void 0===i)return e;t++,n.usedFootnotes.push(a);var o='<a href="#fn:'+a+'" id="fnref:'+a+'" title="See footnote" class="footnote">'+t+"</a>";return n.hashExtraInline(o)})},Markdown.Extra.prototype.printFootnotes=function(e){var n=this;if(0===n.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var t=0;t<n.usedFootnotes.length;t++){var r=n.usedFootnotes[t],a=n.footnotes[r];n.isConvertingFootnote=!0;var i=l(a,n);delete n.isConvertingFootnote,e+='<li id="fn:'+r+'">'+i+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},Markdown.Extra.prototype.fencedCodeBlocks=function(e){function n(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~")}var t=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,r,a){var i=r,o=a,s=t.googleCodePrettify?' class="prettyprint"':"",l="";i&&(l=t.googleCodePrettify||t.highlightJs?' class="language-'+i+'"':' class="'+i+'"');var c=["<pre",s,"><code",l,">",n(o),"</code></pre>"].join("");return t.hashExtraBlock(c)})},Markdown.Extra.prototype.educatePants=function(e){var n=this,t="",r=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(a,i,o,s,l,c,u){var d=e.substring(r,u);return t+=n.applyPants(d),n.smartyPantsLastChar=t.substring(t.length-1),r=u+a.length,i?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(o)?n.smartyPantsLastChar=l.substring(l.length-1):l=n.educatePants(l),void(t+=i+o+s+l+c)):void(t+=a)});var a=e.substring(r);return t+=n.applyPants(a),n.smartyPantsLastChar=t.substring(t.length-1),t},Markdown.Extra.prototype.applyPants=function(e){return e=e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),e=e.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),e=e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(e=e.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),e=e.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),e=e.replace(/"'(?=\w)/g,"&#8220;&#8216;"),e=e.replace(/'"(?=\w)/g,"&#8216;&#8220;"),e=e.replace(/'(?=\d{2}s)/g,"&#8217;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),e=e.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),e=e.replace(/'(?=\s|s\b)/g,"&#8217;"),e=e.replace(/'/g,"&#8216;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),e=e.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),e=e.replace(/"(?=\s)/g,"&#8221;"),e=e.replace(/"/gi,"&#8220;"))},Markdown.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=this.educatePants(e),e=e.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,m)},Markdown.Extra.prototype.definitionLists=function(n){var t=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return n=o(n),n=n.replace(t,function(n,t,a){var i=e(r.processDefListItems(a));return i="<dl>\n"+i+"\n</dl>",t+r.hashExtraBlock(i)+"\n\n"}),s(n)},Markdown.Extra.prototype.processDefListItems=function(r){var a=this,i=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),u=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return r=o(r),r=r.replace(/\n{2,}(?=\\x03)/,"\n"),r=r.replace(i,function(n,t,r){for(var i=e(r).split("\n"),o="",s=0;s<i.length;s++){var c=i[s];c=l(e(c),a),o+="\n<dt>"+c+"</dt>"}return o+"\n"}),r=r.replace(u,function(e,r,i,o){return r||o.match(/\n{2,}/)?(o=Array(i.length+1).join(" ")+o,o=t(o)+"\n\n",o="\n"+c(o,a)+"\n"):(o=n(o),o=l(t(o),a)),"\n<dd>"+o+"</dd>\n"}),s(r)},Markdown.Extra.prototype.strikethrough=function(e){return e.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},Markdown.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,function(e,n){return n?e:" <br>\n"})}}(),define("pagedown-extra",function(){}),define("extensions/markdownExtra",["underscore","utils","classes/Extension","google-code-prettify","pagedown-extra"],function(e,n,t,r){function a(e){e.hooks.chain("onPreviewRefresh",function(){$("#preview-contents pre code").each(function(){var e=$(this).attr("class");"language-flow"!=e&&"language-sequence"!=e&&$(this).parent().addClass("prettyprint linenums")}),r.prettyPrint()})}var i=new t("markdownExtra","Markdown Extra",!0);i.defaultConfig={extensions:["fenced_code_gfm","tables","def_list","attr_list","footnotes","strikethrough","newlines"],intraword:!0,comments:!0,highlighter:"prettify"};var o;return i.onEventMgrCreated=function(e){o=e},i.onToggleMode=a,i.onPagedownConfigure=function(e){var n=e.getConverter();if(i.config.intraword===!0){var t={_DoItalicsAndBold:function(e){return e=e.replace(/([^\w*]|^)(\*\*|__)(?=\S)(.+?[*_]*)(?=\S)\2(?=[^\w*]|$)/g,"$1<strong>$3</strong>"),e=e.replace(/([^\w*]|^)(\*|_)(?=\S)(.+?)(?=\S)\2(?=[^\w*]|$)/g,"$1<em>$3</em>")}};n.setOptions(t)}i.config.comments===!0&&n.hooks.chain("postConversion",function(e){return e.replace(/<!--.*?-->/g,function(e){return e.replace(/^<!---(.+?)-?-->$/,' <span class="comment label label-danger">$1</span> ')})});var r={extensions:i.config.extensions};r.highlighter="prettify",a(e),Markdown.Extra.init(n,r)},i}),define("libs/mathjax_init",["settings"],function(e){var n=document.createElement("script");n.type="text/x-mathjax-config";var t='MathJax.Hub.Config({\n	skipStartupTypeset: true,\n    "HTML-CSS": {\n        preferredFont: "TeX",\n        availableFonts: [\n            "STIX",\n            "TeX"\n        ],\n        linebreaks: {\n            automatic: true\n        },\n        EqnChunk: 10,\n        imageFont: null\n    },\n    tex2jax: <%= tex2jax || \'{ inlineMath: [["$","$"],["\\\\\\\\\\\\\\\\(","\\\\\\\\\\\\\\\\)"]], displayMath: [["$$","$$"],["\\\\\\\\[","\\\\\\\\]"]], processEscapes: true }\' %>,\n    TeX: $.extend({\n        noUndefined: {\n            attributes: {\n                mathcolor: "red",\n                mathbackground: "#FFEEEE",\n                mathsize: "90%"\n            }\n        },\n        Safe: {\n            allow: {\n                URLs: "safe",\n                classes: "safe",\n                cssIDs: "safe",\n                styles: "safe",\n                fontsize: "all"\n            }\n        }\n    }, <%= tex %>),\n    messageStyle: "none"\n});\n';n.innerHTML=_.template(t,{tex:e.extensionSettings.mathJax?e.extensionSettings.mathJax.tex:"undefined",tex2jax:e.extensionSettings.mathJax?e.extensionSettings.mathJax.tex2jax:void 0}),document.getElementsByTagName("head")[0].appendChild(n)}),define("extensions/mathJax",["utils","classes/Extension","mathjax"],function(e,n){function t(e,n,t){var r=c.slice(e,n+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(w.Browser.isMSIE&&(r=r.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));n>e;)c[n]="",n--;c[e]="@@"+m.length+"@@",t&&(r=t(r)),m.push(r),u=d=p=null}function r(e){u=d=p=null,m=[];var n;/`/.test(e)?(e=e.replace(/~/g,"~T").replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,function(e){return e.replace(/\$/g,"~D")}),n=function(e){return e.replace(/~([TD])/g,function(e,n){return{T:"~",D:"$"}[n]})}):n=function(e){return e},c=x(e.replace(/\r\n?/g,"\n"),y);for(var e=1,r=c.length;r>e;e+=2){var a=c[e];"@"===a.charAt(0)?(c[e]="@@"+m.length+"@@",m.push(a)):u?a===d?f?p=e:t(u,e,n):a.match(/\n.*\n/)?(p&&(e=p,t(u,e,n)),u=d=p=null,f=0):"{"===a?f++:"}"===a&&f&&f--:a===b||"$$"===a?(u=e,d=a,f=0):"begin"===a.substr(1,5)&&(u=e,d="\\end"+a.substr(6),f=0)}return p&&t(u,p,n),n(c.join(""))}function a(e){return e=e.replace(/@@(\d+)@@/g,function(e,n){return m[n]}),m=null,e}function i(){h=!1,w.cancelTypeset=!1,w.Queue(["Typeset",w,v]),w.Queue(l)}function o(){!h&&(h=!0,w.Cancel(),w.Queue(i))}var s=new n("mathJax","MathJax",!0);s.defaultConfig={tex:"{}",tex2jax:'{ inlineMath: [["$","$"],["\\\\\\\\(","\\\\\\\\)"]], displayMath: [["$$","$$"],["\\\\[","\\\\]"]], processEscapes: true }'},s.onPagedownConfigure=function(e){v=document.getElementById("preview-contents");var n=e.getConverter();n.hooks.chain("preConversion",r),n.hooks.chain("postConversion",a)};var l;s.onAsyncPreview=function(e){l=e,o()};var c,u,d,p,f,m,g=!1,h=!1,v=null,b="$",w=MathJax.Hub;w.Queue(function(){g=!0,w.processUpdateTime=50,w.Config({"HTML-CSS":{EqnChunk:10,EqnChunkFactor:1},SVG:{EqnChunk:10,EqnChunkFactor:1}})});var x,y=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i;return x=3==="aba".split(/(b)/).length?function(e,n){return e.split(n)}:function(e,n){var t,r=[];if(!n.global){t=n.toString();var a="";t=t.replace(/^\/(.*)\/([im]*)$/,function(e,n,t){return a=t,n}),n=RegExp(t,a+"g")}for(var i=n.lastIndex=0;t=n.exec(e);)r.push(e.substring(i,t.index)),r.push.apply(r,t.slice(1)),i=t.index+t[0].length;return r.push(e.substring(i)),r},function(){var e=MathJax.Hub;if(!e.Cancel){e.cancelTypeset=!1,e.Register.StartupHook("HTML-CSS Jax Config",function(){var n=MathJax.OutputJax["HTML-CSS"],t=n.Translate;n.Augment({Translate:function(r,a){if(e.cancelTypeset||a.cancelled)throw Error("MathJax Canceled");return t.call(n,r,a)}})}),e.Register.StartupHook("SVG Jax Config",function(){var n=MathJax.OutputJax.SVG,t=n.Translate;n.Augment({Translate:function(r,a){if(e.cancelTypeset||a.cancelled)throw Error("MathJax Canceled");return t.call(n,r,a)}})}),e.Register.StartupHook("TeX Jax Config",function(){var n=MathJax.InputJax.TeX,t=n.Translate;n.Augment({Translate:function(r,a){if(e.cancelTypeset||a.cancelled)throw Error("MathJax Canceled");return t.call(n,r,a)}})});var n=e.processError;e.processError=function(t,r,a){return"MathJax Canceled"!==t.message?n.call(e,t,r,a):(MathJax.Message.Clear(0,0),r.jaxIDs=[],r.jax={},r.scripts=[],r.i=r.j=0,r.cancelled=!0,null)},e.Cancel=function(){this.cancelTypeset=!0}}}(),s}),define("extensions/markdownSectionParser",["underscore","extensions/markdownExtra","extensions/mathJax","classes/Extension"],function(e,n,t,r){var a,i=new r("markdownSectionParser","Markdown section parser");return i.onEventMgrCreated=function(e){a=e},i.onPagedownConfigure=function(r){var i="^.+[ \\t]*\\n=+[ \\t]*\\n+|^.+[ \\t]*\\n-+[ \\t]*\\n+|^\\#{1,6}[ \\t]*.+?[ \\t]*\\#*\\n+";n.enabled&&e.some(n.config.extensions,function(e){return"fenced_code_gfm"==e})&&(i="^```.*\\n[\\s\\S]*?\\n```|"+i),t.enabled&&(i="^[ \\t]*\\n\\$\\$[\\s\\S]*?\\$\\$|"+i,i="^[ \\t]*\\n\\\\\\\\[[\\s\\S]*?\\\\\\\\]|"+i,i="^[ \\t]*\\n\\\\?\\\\begin\\{[a-z]*\\*?\\}[\\s\\S]*?\\\\end\\{[a-z]*\\*?\\}|"+i),i=new RegExp(i,"gm");var o=r.getConverter();o.hooks.chain("preConversion",function(n){function t(e,n){var t=r.substring(s,n);o.push({text:t,textWithDelimiter:'\n<div class="se-section-delimiter"></div>\n\n'+t+"\n"})}a.previewStartTime=new Date;var r=n+"\n\n",o=[],s=0;return r.replace(i,function(e,n){t(s,n),s=n}),t(s,n.length),a.onSectionsCreated(o),e.reduce(o,function(e,n){return e+n.textWithDelimiter},"")})},i}),define("extensions/partialRendering",["underscore","crel","extensions/markdownExtra","classes/Extension"],function(e,n,t,r){function a(n,t){if(g=[],m=[],u=void 0,h===!0||c!=t)return h=!1,c=t,m=f,f=n,void(g=n);var r=f.length;e.some(f,function(e,t){return t>=n.length||e.text!=n[t].text?(r=t,!0):void 0});var a=-f.length;e.some(f.slice().reverse(),function(e,t){return t>=n.length||e.text!=n[n.length-t-1].text?(a=-t,!0):void 0}),r-a>f.length&&(a=r-f.length);var i=f.slice(0,r);g=n.slice(r,n.length+a);var o=f.slice(f.length+a,f.length);u=e.first(o),m=f.slice(r,f.length+a),f=i.concat(g).concat(o)}function i(e){var n=e.id.substring(3);y[n]=e}function o(){function t(t){for(var r=n("div",{id:"wmd-preview-section-"+t.id,"class":"wmd-preview-section preview-content"}),o=!1;a;){var s=a.nextSibling;if(o===!0&&"DIV"==a.tagName&&"se-section-delimiter"==a.className)break;o=!0,"DIV"==a.tagName&&"footnotes"==a.className?e.each(a.querySelectorAll("ol > li"),i):r.appendChild(a),a=s}return r}e.each(m,function(e){var n=document.getElementById("wmd-preview-section-"+e.id);x.removeChild(n)});var r=document.getElementById("wmd-preview"),a=r.firstChild,o=document.createDocumentFragment();e.each(g,function(e){o.appendChild(t(e))}),r.innerHTML="";var s=w;void 0!==u&&(s=document.getElementById("wmd-preview-section-"+u.id)),x.insertBefore(o,s),w.innerHTML="";var l=[];if(b===!0){var c=n("ol");e.each(x.querySelectorAll("a.footnote"),function(e,n){e.textContent=n+1;var t=e.id.substring(6);l.push(t),c.appendChild(y[t].cloneNode(!0))}),l.length>0&&w.appendChild(n("div",{"class":"footnotes"},n("hr"),c)),y=e.pick(y,l)}}function s(n){l=n.getConverter(),l.hooks.chain("preConversion",function(){var n=e.map(g,function(e){return e.text});return n.push(c+"\n\n"),n.join("")}),n.hooks.chain("onPreviewRefresh",function(){o()})}var l,c,u,d=new r("partialRendering","Partial Rendering",!0),p=0,f=[],m=[],g=[],h=!1,v=!1,b=!1;d.onSectionsCreated=function(n){var t=[],r="\n";b=!1,e.each(n,function(e){var n=e.textWithDelimiter+"\n";v&&(n=n.replace(/^```.*\n[\s\S]*?\n```|\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/gm,function(e,n){return n?(b=!0,r+=e.replace(/^\s*\n/gm,"")+"\n",""):e})),n=n.replace(/^```.*\n[\s\S]*?\n```|^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,n){return n?(r+=e.replace(/^\s*\n/gm,"")+"\n",""):e}),t.push({id:++p,text:n+"\n"})}),a(t,r)};var w,x,y={};return d.onPagedownConfigure=s,d.onToggleMode=s,d.onInit=function(){t.enabled&&e.some(t.config.extensions,function(e){return"footnotes"==e})&&(v=!0)},d.onReady=function(){w=n("div",{id:"wmd-preview-section-footnotes","class":"preview-content"}),x=document.getElementById("preview-contents"),x.appendChild(w)},d.onFileSelected=function(){h=!0},d}),define("extensions/umlDiagrams",["require","underscore","utils","classes/Extension","crel"],function(e,n,t,r,a){function i(){var t=c.querySelectorAll(".prettyprint > .language-flow");t&&0!=t.length&&e(["flow-chart"],function(e){n.each(t,function(n){try{var t=e.parse(n.textContent),r=n.parentNode,i=a("div",{"class":"flow-chart"});r.parentNode.replaceChild(i,r),t.drawSVG(i,JSON.parse(l.config.flowchartOptions))}catch(o){console.error(o)}})})}function o(){var t=c.querySelectorAll(".prettyprint > .language-sequence");t&&0!=t.length&&e(["Diagram"],function(e){n.each(t,function(n){try{var t=e.parse(n.textContent),r=n.parentNode,i=a("div",{"class":"sequence-diagram"});r.parentNode.replaceChild(i,r),t.drawSVG(i,{theme:"simple"})}catch(o){console.error(o)}})})}function i(){var t=c.querySelectorAll(".prettyprint > .language-flow");t&&0!=t.length&&e(["flow-chart"],function(e){n.each(t,function(n){try{var t=e.parse(n.textContent),r=n.parentNode,i=a("div",{"class":"flow-chart"});r.parentNode.replaceChild(i,r),t.drawSVG(i,JSON.parse(l.config.flowchartOptions))}catch(o){console.error(o)}})})}function s(e){e.hooks.chain("onPreviewRefresh",function(){o(),i()})}var l=new r("umlDiagrams","UML Diagrams",!0);l.defaultConfig={flowchartOptions:["{",'   "line-width": 2,','   "font-family": "sans-serif",','   "font-weight": "normal"',"}"].join("\n")};var c=document.getElementById("preview-contents");return l.onPagedownConfigure=s,l.onToggleMode=s,l}),define("extensions/toc",["underscore","utils","classes/Extension"],function(e,n,t){function r(e,n,t){this.tagName=e,this.anchor=n,this.text=t,this.children=[]}function a(n,t){function i(){void 0!==s&&(s.children.length>0&&(s.children=a(s.children,t+1)),c.push(s))}t=t||1;var s,l="H"+t,c=[];return e.each(n,function(e){e.tagName!=l?t!==o.config.maxDepth&&(void 0===s&&(s=new r),s.children.push(e)):(i(),s=e)}),i(),c}function i(){function t(t){for(var r=t.id||n.slugify(t.textContent)||"title",a=r,o=0;e.has(i,a);)a=r+"-"+ ++o;return i[a]=!0,t.id=a,a}var i={},o=[];return e.each(s.querySelectorAll("h1, h2, h3, h4, h5, h6"),function(e){o.push(new r(e.tagName,t(e),e.textContent))}),o=a(o),'<div class="toc">\n<ul>\n'+o.join("")+"</ul>\n</div>\n"}var o=new t("toc","Table of Contents",!0);o.defaultConfig={marker:"\\[(TOC|toc)\\]",maxDepth:6,button:!0},r.prototype.childrenToString=function(){if(0===this.children.length)return"";var n="<ul>\n";return e.each(this.children,function(e){n+=e.toString()}),n+="</ul>\n"},r.prototype.toString=function(){var e="<li>";return this.anchor&&this.text&&(e+='<a href="#'+this.anchor+'">'+this.text+"</a>"),e+=this.childrenToString()+"</li>\n"};var s;return o.onPagedownConfigure=function(n){s=document.getElementById("preview-contents");var t=new RegExp("^"+o.config.marker+"$");n.hooks.chain("onPreviewRefresh",function(){var n=document.querySelectorAll(".table-of-contents, .toc"),r=i();e.each(s.getElementsByTagName("p"),function(e){t.test(e.innerHTML)&&(e.innerHTML=r)}),e.each(n,function(e){e.innerHTML=r}),$("#leanoteNavContentMd").height("auto");try{$(r).text()||$("#leanoteNavContentMd").html("&nbsp; &nbsp; Nothing...")}catch(a){}var o=$("#leanoteNavContentMd").height(),l=$("#mdEditor").height()-100;o>l&&$("#leanoteNavContentMd").height(l)})},o.onReady=function(){},o}),define("extensions/emailConverter",["classes/Extension"],function(e){var n=new e("emailConverter","Markdown Email",!0);return n.onPagedownConfigure=function(e){e.getConverter().hooks.chain("postConversion",function(e){return e.replace(/<(mailto\:)?([^\s>]+@[^\s>]+\.\S+?)>/g,function(e,n,t){return'<a href="mailto:'+t+'">'+t+"</a>"})})},n}),define("extensions/todoList",["classes/Extension"],function(e){var n=new e("todoList","Markdown todoList",!0);return n.onPagedownConfigure=function(e){e.getConverter().hooks.chain("postConversion",function(e){return e.replace(/<li>(<p>)?\[([ xX]?)\] /g,function(e,n,t){return n||(n=""),"x"!=t&&"X"!=t?'<li class="m-todo-item m-todo-empty">'+n+'<input type="checkbox" /> ':'<li class="m-todo-item m-todo-done">'+n+'<input type="checkbox" checked /> '})})},n}),define("extensions/scrollLink",["underscore","classes/Extension"],function(e,n){function t(n,t,r){var a,i=e.find(t,function(e,t){return a=t,n<e.endOffset
});if(void 0!==i){var o=(n-i.startOffset)/(i.height||1),s=r[a];return s.startOffset+s.height*o}}var r,a=new n("scrollLink","Scroll Link",!0,!0);a.onAceCreated=function(e){r=e};var i;a.onSectionsCreated=function(e){i=e};var o=0;a.onMarkdownTrim=function(e){o=e};var s,l,c,u,d,p=[],f=[],m=e.debounce(function(){function n(e){var n=g;if(void 0!==e){var t=document.createTextNode(e);l.empty().append(t),n+=l.prop("scrollHeight")}var r=a+n;p.push({startOffset:a,endOffset:r,height:n}),a=r}p=[];var t=0,a=0,m=o,g=0;if(window.lightMode){l.innerWidth(s.innerWidth()),e.each(i,function(e,t){var r=e.text;t!==i.length-1?0===r.length&&(r=void 0):/\n$/.test(r)&&(r+="\n"),n(r)});var h=e.last(p).endOffset,v=s[0].scrollHeight,b=v/h;p=e.map(p,function(e){return{startOffset:e.startOffset*b,endOffset:e.endOffset*b,height:e.height*b}})}else e.each(i,function(e){t+=e.text.length+m,m=0;var n=r.session.doc.indexToPosition(t),i=r.session.documentToScreenPosition(n.row,n.column),o=i.row*r.renderer.lineHeight,s=o-a;p.push({startOffset:a,endOffset:o,height:s}),a=o});f=[];var w,y=c.scrollTop();c.find(".preview-content > .se-section-delimiter").each(function(){if(void 0===w)return void(w=0);var e=$(this),n=e.position().top+y;f.push({startOffset:w,endOffset:n,height:n-w}),w=n});var C=c.prop("scrollHeight");f.push({startOffset:w,endOffset:C,height:C-w}),u=-10,d=-10,x()},500),g=!1,h=!1,v=!1,b=!1,w=$("<div>"),x=e.throttle(function(){if(0===p.length||p.length!==f.length)return void x();var n=window.lightMode?s.scrollTop():r.renderer.getScrollTop();0>n&&(n=0);var a,i=c.scrollTop();if(g===!0){if(Math.abs(n-u)<=9)return;if(g=!1,u=n,a=t(n,p,f),a=e.min([a,c.prop("scrollHeight")-c.outerHeight()]),Math.abs(a-i)<=9)return void(d=i);w.stop("scrollLinkFx",!0).css("value",0).animate({value:a-i},{easing:"linear",duration:200,queue:"scrollLinkFx",step:function(e){b=!0,d=i+e,c.scrollTop(d)},done:function(){e.defer(function(){b=!1})}}).dequeue("scrollLinkFx")}else if(h===!0){if(Math.abs(i-d)<=9)return;if(h=!1,d=i,a=t(i,f,p),window.lightMode?a=e.min([a,s.prop("scrollHeight")-s.outerHeight()]):(a=e.min([a,r.session.getScreenLength()*r.renderer.lineHeight+r.renderer.scrollMargin.bottom-r.renderer.$size.scrollerHeight]),0>a&&(a=0)),Math.abs(a-n)<=9)return void(u=n);w.stop("scrollLinkFx",!0).css("value",0).animate({value:a-n},{easing:"linear",duration:200,queue:"scrollLinkFx",step:function(e){v=!0,u=n+e,window.lightMode||r.session.setScrollTop(u),window.lightMode&&s.scrollTop(u)},done:function(){e.defer(function(){v=!1})}}).dequeue("scrollLinkFx")}},100);a.onLayoutResize=function(){g=!0,m()},a.onFileClosed=function(){p=[]};var y=function(e){c=$(".preview-container"),s=$("#wmd-input"),l=$(".textarea-helper"),c.scroll(function(){b===!1&&C===!1&&(h=!0,g=!1,x()),C=!1});var n=function(){v===!1&&(g=!0,h=!1,x())},t=e?500:0;setTimeout(function(){window.lightMode?s.scroll(n):r.session.on("changeScrollTop",n)},t)};a.onToggleMode=function(){c=$(".preview-container"),s=$("#wmd-input"),l=$(".textarea-helper"),m(),y(!0)};var C=!1;a.onReady=function(){c=$(".preview-container"),s=$("#wmd-input"),l=$(".textarea-helper"),y(),$(".extension-preview-buttons .table-of-contents, #preview-contents").on("click","a",function(e){var n=this.hash;if(n){e.preventDefault();var a=$("#preview-contents "+decodeURIComponent(n));if(a.length){var i=a[0].getBoundingClientRect().top-c.get(0).getBoundingClientRect().top+c.scrollTop(),o=t(i,f,p);c.scrollTop(i),window.lightMode||r.session.setScrollTop(o),window.lightMode&&s.scrollTop(o)}}})};var k;return a.onPagedownConfigure=function(e){k=$("#preview-contents"),e.getConverter().hooks.chain("postConversion",function(e){return k.height(k.height()),e})},a.onPreviewFinished=function(){var e=k.height();k.height("auto");var n=k.height();g=!0,e>n&&(C=!0),m()},a}),define("extensions/htmlSanitizer",["underscore","utils","classes/Extension"],function(e,n,t){function r(e){var n,t={},r=e.split(",");for(n=0;n<r.length;n++)t[r[n]]=!0;return t}function a(e,n){function t(e,t,a,o){if(t=t&&t.toLowerCase(),k[t])for(;c.last()&&S[c.last()];)r("",c.last());C[t]&&c.last()==t&&r("",t),o=w[t]||!!o,o||c.push(t);var s={};a.replace(p,function(e,n,t,r,a){var o=t||r||a||"";s[n]=i(o)}),n.start&&n.start(t,s,o)}function r(e,t){var r,a=0;if(t=t&&t.toLowerCase())for(a=c.length-1;a>=0&&c[a]!=t;a--);if(a>=0){for(r=c.length-1;r>=a;r--)n.end&&n.end(c[r]);c.length=a}}var a,o,s,c=[],b=e;for(c.last=function(){return c[c.length-1]};e;){if(o=!0,c.last()&&_[c.last()])e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+c.last()+"[^>]*>","i"),function(e,t){return t=t.replace(g,"$1").replace(v,"$1"),n.chars&&n.chars(i(t)),""}),r("",c.last());else if(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(n.comment&&n.comment(e.substring(4,a)),e=e.substring(a+3),o=!1)):h.test(e)?(s=e.match(h),s&&(e=e.replace(s[0],""),o=!1)):m.test(e)?(s=e.match(d),s&&(e=e.substring(s[0].length),s[0].replace(d,r),o=!1)):f.test(e)&&(s=e.match(u),s&&(e=e.substring(s[0].length),s[0].replace(u,t),o=!1)),o){a=e.indexOf("<");var x=0>a?e:e.substring(0,a);e=0>a?"":e.substring(a),n.chars&&n.chars(i(x))}if(e==b)return c.reverse(),c.forEach(function(e){l.push("</"),l.push(e),l.push(">")});b=e}r()}function i(e){if(!e)return"";var n=$.exec(e),t=n[1],r=n[3],a=n[2];return a&&(M.innerHTML=a.replace(/</g,"&lt;"),a="textContent"in M?M.textContent:M.innerText),t+a+r}function o(e){return e.replace(/&/g,"&amp;").replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(n){var t=!1,r=e.bind(n.push,n);return{start:function(n,a,i){n=n&&n.toLowerCase(),!t&&_[n]&&(t=n),t||E[n]!==!0||(r("<"),r(n),e.forEach(a,function(e,n){var t=n&&n.toLowerCase();I[t]===!0&&(r(" "),r(n),r('="'),r(o(e)),r('"'))}),r(i?"/>":">"))},end:function(e){e=e&&e.toLowerCase(),t||E[e]!==!0||(r("</"),r(e),r(">")),e==t&&(t=!1)},chars:function(e){t||r(o(e))},comment:function(e){t||(r("<!--"),r(o(e)),r("-->"))}}}var l,c=new t("htmlSanitizer","HTML Sanitizer",!0);c.onPagedownConfigure=function(e){var n=e.getConverter();n.hooks.chain("postConversion",function(e){return l=[],e.split('<div class="se-preview-section-delimiter"></div>').forEach(function(e){a(e,s(l)),l.push('<div class="se-preview-section-delimiter"></div>')}),l.slice(0,-1).join("")})};var u=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,d=/^<\s*\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,f=/^</,m=/^<\s*\//,g=/<!--(.*?)-->/g,h=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,b=/([^\#-~| |!])/g,w=r("area,br,col,hr,img,wbr"),x=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=r("rp,rt"),C=e.extend({},y,x),k=e.extend({},x,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul,embed,iframe")),S=e.extend({},y,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var,input")),_=r("script"),E=e.extend({},w,k,S,C),T=r("background,cite,href,longdesc,src,usemap"),I=e.extend({},T,r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width,checked,style"));I.id=!0,I.allowfullscreen=!0;var M=document.createElement("pre"),$=/^(\s*)([\s\S]*?)(\s*)$/;return c}),function(e){var n="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]},e.expr[":"].uncached=function(n){if(!e(n).is('img[src!=""]'))return!1;var t=new Image;return t.src=n.src,!t.complete},e.fn.waitForImages=function(t,r,a){var i=0,o=0;if(e.isPlainObject(arguments[0])&&(a=arguments[0].waitForAll,r=arguments[0].each,t=arguments[0].finished),t=t||e.noop,r=r||e.noop,a=!!a,!e.isFunction(t)||!e.isFunction(r))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var s=e(this),l=[],c=e.waitForImages.hasImageProperties||[],u=/url\(\s*(['"]?)(.*?)\1\s*\)/g;a?s.find("*").andSelf().each(function(){var n=e(this);n.is("img:uncached")&&l.push({src:n.attr("src"),element:n[0]}),e.each(c,function(e,t){var r,a=n.css(t);if(!a)return!0;for(;r=u.exec(a);)l.push({src:r[2],element:n[0]})})}):s.find("img:uncached").each(function(){l.push({src:this.src,element:this})}),i=l.length,o=0,0===i&&t.call(s[0]),e.each(l,function(a,l){var c=new Image;e(c).bind("load."+n+" error."+n,function(e){return o++,r.call(l.element,o,i,"load"==e.type),o==i?(t.call(s[0]),!1):void 0}),c.src=l.src})})}}(jQuery),define("jquery-waitforimages",function(){}),define("eventMgr",["underscore","crel","utils","classes/Extension","settings","extensions/markdownSectionParser","extensions/partialRendering","extensions/umlDiagrams","extensions/markdownExtra","extensions/toc","extensions/mathJax","extensions/emailConverter","extensions/todoList","extensions/scrollLink","extensions/htmlSanitizer","jquery-waitforimages"],function(e,n,t,r,a){function i(n){return e.chain(c).map(function(e){return e.enabled&&e[n]}).compact().value()}function o(n){return d[n]=i(n),function(){var t=arguments;e.each(d[n],function(n){try{n.apply(null,t)}catch(r){console.error(e.isObject(r)?r.stack:r)}})}}function s(e){l[e]=o(e)}var l={},c=e.chain(arguments).map(function(e){return e instanceof r&&e}).compact().value(),u=a.extensionSettings||{};e.each(c,function(n){n.config=e.extend({},n.defaultConfig,u[n.extensionId]),n.enabled=window.viewerMode===!0&&n.disableInViewer===!0?!1:window.lightMode===!0&&n.disableInLight===!0?!1:!n.isOptional||void 0===n.config.enabled||n.config.enabled===!0});var d={};l.addListener=function(e,n){try{d[e].push(n)}catch(t){console.error("No event listener called "+e)}},o("onInit")(),l.onLoadSettings=function(){e.each(c,function(e){var n=!e.isOptional||void 0===e.config.enabled||e.config.enabled===!0;t.setInputChecked("#input-enable-extension-"+e.extensionId,n),"markdownExtra"==e.extensionId?t.setInputChecked("#input-settings-markdown-extra",n):"mathJax"==e.extensionId&&t.setInputChecked("#input-settings-mathjax",n);var r=e.onLoadSettings;r&&r()})},l.onSaveSettings=function(n,r){e.each(c,function(a){if(window.lightMode===!0&&a.disableInLight===!0)return void(n[a.extensionId]=a.config);var i=e.extend({},a.defaultConfig);i.enabled=t.getInputChecked("#input-enable-extension-"+a.extensionId);var o;"markdownExtra"==a.extensionId?(o=t.getInputChecked("#input-settings-markdown-extra"),o!=a.enabled&&(i.enabled=o)):"mathJax"==a.extensionId&&(o=t.getInputChecked("#input-settings-mathjax"),o!=a.enabled&&(i.enabled=o));var s=a.onSaveSettings;s&&s(i,r),n[a.extensionId]=i})},s("onMessage"),s("onError"),s("onPeriodicRun"),s("onFileMgrCreated"),s("onSynchronizerCreated"),s("onPublisherCreated"),s("onEventMgrCreated"),s("onFileCreated"),s("onFileDeleted"),s("onFileSelected"),s("onFileOpen"),s("onFileClosed"),s("onContentChanged"),s("onToggleMode"),s("onLayoutConfigure"),s("onLayoutCreated"),s("onLayoutResize"),s("onPagedownConfigure"),s("onSectionsCreated"),s("onMarkdownTrim"),s("onAceCreated");var p,f,m=o("onPreviewFinished"),g=i("onAsyncPreview");l.onAsyncPreview=function(){function n(r){var a=r.length?r.shift():function(){e.defer(function(){var n="";e.each(p.children,function(e){n+=e.innerHTML}),n=n.replace(/^<div class="se-section-delimiter"><\/div>\n\n/gm,"");var r=t.trim(n),a=r.replace(/ <span class="comment label label-danger">.*?<\/span> /g,"");m(r,a)})};a(function(){n(r)})}n(g.concat([function(e){f.waitForImages(e)}]))};var h=o("onReady");return l.onReady=function(){p=document.getElementById("preview-contents"),f=$(p);var t=function(t){var r=n("div",{"class":"btn-group"}),a=t();return e.isString(a)?r.innerHTML=a:e.isElement(a)&&r.appendChild(a),r};if(window.viewerMode===!1){var r=i("onCreateEditorButton"),a=document.createDocumentFragment();e.each(r,function(e){a.appendChild(t(e))})}var o=i("onCreatePreviewButton"),s=document.createDocumentFragment();e.each(o,function(e){s.appendChild(t(e))});var l=document.querySelector(".extension-preview-buttons");l.appendChild(s);var c=$(l),u=c.width();c.find(".btn-group").each(function(){var e=$(this);e.find(".dropdown-menu").css({right:-u+e.width()+e.position().left})}),h()},l.onEventMgrCreated(l),l}),define("shortcutMgr",["underscore","eventMgr","utils"],function(e){var n={},t={bold:{title:"Strong",defaultKey:{win:"Ctrl-B",mac:"Command-B|Ctrl-B"},isPageDown:!0},italic:{title:"Emphasis",defaultKey:{win:"Ctrl-I",mac:"Command-I|Ctrl-I"},isPageDown:!0},link:{title:"Hyperlink",defaultKey:{win:"Ctrl-L",mac:"Command-L|Ctrl-L"},isPageDown:!0},quote:{title:"Blockquote",defaultKey:{win:"Ctrl-Q",mac:"Command-Q|Ctrl-Q"},isPageDown:!0},code:{title:"Code Sample",defaultKey:{win:"Ctrl-K",mac:"Command-K|Ctrl-K"},isPageDown:!0},image:{title:"Image",defaultKey:{win:"Ctrl-G",mac:"Command-G|Ctrl-G"},isPageDown:!0},olist:{title:"Numbered List",defaultKey:{win:"Ctrl-O",mac:"Command-O|Ctrl-O"},isPageDown:!0},ulist:{title:"Bulleted List",defaultKey:{win:"Ctrl-U",mac:"Command-U|Ctrl-U"},isPageDown:!0},heading:{title:"Heading",defaultKey:{win:"Ctrl-H",mac:"Command-H|Ctrl-H"},isPageDown:!0},hr:{title:"Horizontal Rule",defaultKey:{win:"Ctrl-R",mac:"Command-R|Ctrl-R"},isPageDown:!0},undo:{title:"Undo",defaultKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:function(e){e.undo()},isPageDown:!0},redo:{title:"Redo",defaultKey:{win:"Ctrl-Y|Ctrl-Shift-Z",mac:"Command-Y|Command-Shift-Z"},exec:function(e){e.redo()},isPageDown:!0},selectall:{title:"Select All",defaultKey:{win:"Ctrl-A",mac:"Command-A"},exec:function(e){e.selectAll()},readOnly:!0},removeline:{title:"Remove Line",defaultKey:{win:"Ctrl-D",mac:"Command-D"},exec:function(e){e.removeLines()},multiSelectAction:"forEachLine"},duplicateSelection:{title:"Duplicate Selection",defaultKey:{win:"Ctrl-Shift-D",mac:"Command-Shift-D"},exec:function(e){e.duplicateSelection()},multiSelectAction:"forEach"},sortlines:{title:"Sort Lines",defaultKey:{win:"Ctrl-Alt-S",mac:"Command-Alt-S"},exec:function(e){e.sortLines()},multiSelectAction:"forEachLine"},modifyNumberUp:{title:"Number Up",defaultKey:{win:"Ctrl-Shift-Up",mac:"Alt-Shift-Up"},exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},modifyNumberDown:{title:"Number Down",defaultKey:{win:"Ctrl-Shift-Down",mac:"Alt-Shift-Down"},exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},find:{title:"Find",defaultKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e){var n=ace.require("ace/config");n.loadModule("ace/ext/searchbox",function(n){n.Search(e)})},readOnly:!0},replace:{title:"Replace",defaultKey:{win:"Ctrl-Shift-F",mac:"Command-Option-F"},exec:function(e){var n=require("ace/config");n.loadModule("ace/ext/searchbox",function(n){n.Search(e,!0)})},readOnly:!0},findnext:{title:"Find Next",defaultKey:{win:"Ctrl-P",mac:"Command-P"},exec:function(e){e.findNext()},readOnly:!0},findprevious:{title:"Find Previous",defaultKey:{win:"Ctrl-Shift-P",mac:"Command-Shift-P"},exec:function(e){e.findPrevious()},readOnly:!0},togglerecording:{title:"Toggle Recording",defaultKey:{win:"Ctrl-Alt-E",mac:"Command-Option-E"},exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},replaymacro:{title:"Replay Macro",defaultKey:{win:"Ctrl-Shift-E",mac:"Command-Shift-E"},exec:function(e){e.commands.replay(e)},readOnly:!0}};return e.each(t,function(e,n){e.name=n,e.bindKey=e.defaultKey}),n.configureAce=function(n){e.each(t,function(t){t.exec&&n.commands.addCommand(e.pick(t,"name","bindKey","exec","readOnly","multiSelectAction"))})},n.getPagedownKeyStrokes=function(){return e.chain(t).where({isPageDown:!0}).map(function(e){return[e.name,e.bindKey]}).object().value()},n}),function(){function e(){}function n(e){this.buttonBar=d.getElementById("wmd-button-bar"+e),this.preview=d.getElementById("wmd-preview"+e),this.input=d.getElementById("wmd-input"+e)}function t(e,n){var t,a,i,o=this,s=[],c=0,u="none",d=function(e,n){u!=e&&(u=e,n||f()),g.isIE&&"moving"==u?i=null:a=setTimeout(p,1)},p=function(e){i=new r(n,e),a=void 0};this.setCommandMode=function(){u="command",f(),a=setTimeout(p,0)},this.canUndo=function(){return c>1},this.canRedo=function(){return s[c+1]?!0:!1},this.undo=function(){o.canUndo()&&(t?(t.restore(),t=null):(s[c]=new r(n),s[--c].restore(),e&&e())),u="none",n.input.focus(),p()},this.redo=function(){o.canRedo()&&(s[++c].restore(),e&&e()),u="none",n.input.focus(),p()};var f=function(){var a=i||new r(n);return a?"moving"==u?void(t||(t=a)):(t&&(s[c-1].text!=t.text&&(s[c++]=t),t=null),s[c++]=a,s[c+1]=null,void(e&&e())):!1},m=function(e){if(!e.ctrlKey&&!e.metaKey){var n=e.keyCode;n>=33&&40>=n||n>=63232&&63235>=n?d("moving"):8==n||46==n||127==n?d("deleting"):13==n?d("newlines"):27==n?d("escape"):(16>n||n>20)&&91!=n&&d("typing")}},h=function(){l.addEvent(n.input,"keypress",function(e){!e.ctrlKey&&!e.metaKey||e.altKey||89!=e.keyCode&&90!=e.keyCode||e.preventDefault()});var e=function(){(g.isIE||i&&i.text!=n.input.value)&&void 0==a&&(u="paste",f(),p())};l.addEvent(n.input,"keydown",m),l.addEvent(n.input,"mousedown",function(){d("moving")}),n.input.onpaste=e,n.input.ondrop=e},v=function(){h(),p(!0)};this.reinit=function(e,n,r,o){s=[],c=0,u="none",t=void 0,a=void 0,p(),i.text=e,i.start=n,i.end=r,i.scrollTop=o,i.setInputAreaSelection(),f()},this.setMode=d,v()}function r(n,t){var r=this,a=n.input;this.init=function(){l.isVisible(a)&&(t||!d.activeElement||d.activeElement===a)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=a.scrollTop,(!this.text&&a.selectionStart||0===a.selectionStart)&&(this.text=a.value))},this.setInputAreaSelection=function(){if(l.isVisible(a))if(void 0===a.selectionStart||g.isOpera){if(d.selection){if(d.activeElement&&d.activeElement!==a)return;a.focus();var e=a.createTextRange();e.moveStart("character",-a.value.length),e.moveEnd("character",-a.value.length),e.moveEnd("character",r.end),e.moveStart("character",r.start),e.select()}}else a.focus(),a.selectionStart=r.start,a.selectionEnd=r.end,a.scrollTop=r.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(n.ieCachedRange||!a.selectionStart&&0!==a.selectionStart){if(d.selection){r.text=l.fixEolChars(a.value);var e=n.ieCachedRange||d.selection.createRange(),t=l.fixEolChars(e.text),i="",o=i+t+i;e.text=o;var s=l.fixEolChars(a.value);e.moveStart("character",-o.length),e.text=t,r.start=s.indexOf(i),r.end=s.lastIndexOf(i)-i.length;var c=r.text.length-l.fixEolChars(a.value).length;if(c){for(e.moveStart("character",-t.length);c--;)t+="\n",r.end+=1;e.text=t}n.ieCachedRange&&(r.scrollTop=n.ieCachedScrollTop),n.ieCachedRange=null,this.setInputAreaSelection()}}else r.start=a.selectionStart,r.end=a.selectionEnd},this.restore=function(){void 0!=r.text&&r.text!=a.value&&(a.value=r.text),this.setInputAreaSelection(),a.scrollTop=r.scrollTop},this.getChunks=function(){var n=new e;return n.before=l.fixEolChars(r.text.substring(0,r.start)),n.startTag="",n.selection=l.fixEolChars(r.text.substring(r.start,r.end)),n.endTag="",n.after=l.fixEolChars(r.text.substring(r.end)),n.scrollTop=r.scrollTop,n},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function a(e,n,t,r){var a,i,o,s=3e3,u="delayed",p=function(e,n){l.addEvent(e,"input",n),e.onpaste=n,e.ondrop=n,l.addEvent(e,"keypress",n),l.addEvent(e,"keydown",n)},f=function(){var e=0;return window.innerHeight?e=window.pageYOffset:d.documentElement&&d.documentElement.scrollTop?e=d.documentElement.scrollTop:d.body&&(e=d.body.scrollTop),e},m=function(){if(n.preview){var t=n.input.value;if(!t||t!=o){o=t;var r=(new Date).getTime();t=e.makeHtml(t);var a=(new Date).getTime();i=a-r,S(t)}}};void 0!==r&&(m=r(m));var h=function(){if(a&&(clearTimeout(a),a=void 0),"manual"!==u){var e=0;"delayed"===u&&(e=i),e>s&&(e=s),a=setTimeout(m,e)}},v=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},b=function(){n.preview&&(n.preview.scrollTop=(n.preview.scrollHeight-n.preview.clientHeight)*v(n.preview))};this.refresh=function(e){e?(o="",m()):h()},this.processingTime=function(){return i};var w,x=!0,y=function(e){var t=n.preview,r=t.parentNode,a=t.nextSibling;r.removeChild(t),t.innerHTML=e,a?r.insertBefore(t,a):r.appendChild(t)},C=function(e){n.preview.innerHTML=e},k=function(e){if(w)return w(e);try{C(e),w=C}catch(n){(w=y)(e)}},S=function(e){var r=c.getTop(n.input)-f();if(n.preview&&(k(e),t()),b(),x)return void(x=!1);var a=c.getTop(n.input)-f();g.isIE?setTimeout(function(){window.scrollBy(0,a-r)},0):window.scrollBy(0,a-r)},_=function(){p(n.input,h),n.preview&&(n.preview.scrollTop=0)};_()}function i(e,n,t,a,i,o,s){function c(e,i,o){b.focus(),t&&t.setCommandMode();var s=new r(n);if(s){var l=s.getChunks(),c=function(){b.focus(),l&&s.setChunks(l),s.restore(),a.refresh()},u=w.insertLink(l,c,e,i,o);u||c()}}function u(e){b.focus();var i="wmd-link-button"==e.id||"wmd-image-button"==e.id;if(e.textOp){t&&!i&&t.setCommandMode();var o=new r(n);if(!o)return;var s=o.getChunks(),l=function(){b.focus(),s&&o.setChunks(s),o.restore(),a.refresh()},c=e.textOp(s,l);c||(l(),i||b.dispatchEvent(new Event("input")))}e.execute&&e.execute(t)}function p(e,t){var r="0px",a="-20px",i="-40px",o=e.getElementsByTagName("span")[0];t?(o.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){o.style.backgroundPosition=this.XShift+" "+i},e.onmouseout=function(){o.style.backgroundPosition=this.XShift+" "+r},g.isIE&&(e.onmousedown=function(){d.activeElement&&d.activeElement!==n.input||(n.ieCachedRange=document.selection.createRange(),n.ieCachedScrollTop=n.input.scrollTop)}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),u(this),!1}),e.className=e.className.replace(/ disabled/g,"")):(o.style.backgroundPosition=e.XShift+" "+a,e.onmouseover=e.onmouseout=e.onclick=function(){},e.className+=" disabled")}function m(e){return"string"==typeof e&&(e=i[e]),function(){e.apply(i,arguments)}}function h(){var t=n.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+e,r.className="wmd-button-row",r=t.appendChild(r);var a=0,i=function(n,t,i,o){var s=document.createElement("li");s.className="wmd-button",s.style.left=a+"px",a+=25;var l=document.createElement("span");return s.id=n+e,s.appendChild(l),s.title=t,s.XShift=i,o&&(s.textOp=o),p(s,!0),r.appendChild(s),s};x.bold=i("wmd-bold-button",s("bold"),"0px",m("doBold")),x.italic=i("wmd-italic-button",s("italic"),"-20px",m("doItalic")),x.link=i("wmd-link-button",s("link"),"-40px",m(function(e,n){return this.doLinkOrImage(e,n,!1)})),x.quote=i("wmd-quote-button",s("quote"),"-60px",m("doBlockquote")),x.code=i("wmd-code-button",s("code"),"-80px",m("doCode")),x.image=i("wmd-image-button",s("image"),"-100px",m(function(e,n){return this.doLinkOrImage(e,n,!0)})),x.olist=i("wmd-olist-button",s("olist"),"-120px",m(function(e,n){this.doList(e,n,!0)})),x.ulist=i("wmd-ulist-button",s("ulist"),"-140px",m(function(e,n){this.doList(e,n,!1)})),x.heading=i("wmd-heading-button",s("heading"),"-160px",m("doHeading")),x.hr=i("wmd-hr-button",s("hr"),"-180px",m("doHorizontalRule")),x.undo=i("wmd-undo-button",s("undo"),"-200px",null),x.undo.execute=function(e){e&&e.undo()};var l=s(/win/.test(f.platform.toLowerCase())?"redo":"redomac");if(x.redo=i("wmd-redo-button",l,"-220px",null),x.redo.execute=function(e){e&&e.redo()},o){var c=document.createElement("li"),u=document.createElement("span");c.appendChild(u),c.className="wmd-button wmd-help-button",c.id="wmd-help-button"+e,c.XShift="-240px",c.isHelp=!0,c.style.right="0px",c.title=s("help"),c.onclick=o.handler,p(c,!0),r.appendChild(c),x.help=c}v()}function v(){t&&(p(x.undo,t.canUndo()),p(x.redo,t.canRedo()))}var b=n.input,x={};h();var y="keydown";g.isOpera&&(y="keypress"),l.addEvent(b,y,function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey){var n=e.charCode||e.keyCode,r=String.fromCharCode(n).toLowerCase();switch(r){case"b":u(x.bold);break;case"i":u(x.italic);break;case"l":u(x.link);break;case"q":u(x.quote);break;case"k":u(x.code);break;case"g":u(x.image);break;case"o":u(x.olist);break;case"u":u(x.ulist);break;case"h":u(x.heading);break;case"r":u(x.hr);break;case"y":u(x.redo);break;case"z":u(e.shiftKey?x.redo:x.undo);break;case"v":return void t.setMode("typing");case"x":return void t.setMode("deleting");default:return}e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1)}}),l.addEvent(b,"keyup",function(e){if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){var n=e.charCode||e.keyCode;if(13===n){var t={};t.textOp=m("doAutoindent"),u(t)}}}),g.isIE&&l.addEvent(b,"keydown",function(e){var n=e.keyCode;return 27===n?!1:void 0}),MD.insertLink=c,MD.insertLink2=c,this.setUndoRedoButtonStates=v,this.buttons=x,this.setButtonState=p}function o(e,n){this.hooks=e,this.getString=n}function s(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,n,t){return n=n.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),n=decodeURIComponent(n),n=encodeURI(n).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),n=n.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),t&&(t=t.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),t?n+' "'+t+'"':n})}var l={},c={},u={},d=window.document,p=window.RegExp,f=window.navigator,m={lineLength:72},g={isIE:/msie/.test(f.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(f.userAgent.toLowerCase())||/msie 5/.test(f.userAgent.toLowerCase()),isOpera:/opera/.test(f.userAgent.toLowerCase())},h={bold:getMsg("Strong")+" <strong> Ctrl/Cmd+B",boldexample:getMsg("strong text"),italic:getMsg("Emphasis")+" <em> Ctrl/Cmd+I",italicexample:getMsg("emphasized text"),link:getMsg("Hyperlink")+" <a> Ctrl/Cmd+L",linkdescription:getMsg("enter link description here"),linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:getMsg("Blockquote")+" <blockquote> Ctrl/Cmd+Q",quoteexample:getMsg("Blockquote"),code:getMsg("Code Sample")+" <pre><code> Ctrl/Cmd+K",codeexample:getMsg("enter code here"),image:getMsg("Image")+"<img> Ctrl/Cmd+G",imagedescription:getMsg("enter image description here"),imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:getMsg("Numbered List")+" <ol> Ctrl/Cmd+O",ulist:getMsg("Bulleted List")+" <ul> Ctrl/Cmd+U",litem:getMsg("List item"),heading:getMsg("Heading")+" <h1>/<h2> Ctrl/Cmd+H",headingexample:getMsg("Heading"),hr:getMsg("Horizontal Rule")+" <hr> Ctrl/Cmd+R",undo:getMsg("Undo")+" - Ctrl/Cmd+Z",redo:getMsg("Redo")+" - Ctrl/Cmd+Y",redomac:getMsg("Redo")+" - Ctrl+Shift+Z",help:"Markdown Editing Help"},v="http://",b="http://";Markdown.EditorLight=function(e,r,s){s=s||{},"function"==typeof s.handler&&(s={helpButton:s}),s.strings=s.strings||{},s.helpButton&&(s.strings.help=s.strings.help||s.helpButton.title);var l=function(e){return s.strings[e]||h[e]};r=r||"";var c=this.hooks=new Markdown.HookCollection;c.addNoop("onPreviewRefresh"),c.addNoop("postBlockquoteCreation"),c.addFalse("insertImageDialog"),c.addFalse("insertLinkDialog"),this.getConverter=function(){return e};var u,p,f=this;this.run=function(m){if(!u){u=new n(r);var g,h=new o(c,l),v=new a(e,u,function(){c.onPreviewRefresh()},m);/\?noundo/.test(d.location.href)||(p=new t(function(){v.refresh(),g&&g.setUndoRedoButtonStates()},u),this.textOperation=function(e){p.setCommandMode(),e(),f.refreshPreview()}),g=new i(r,u,p,v,h,s.helpButton,l),g.setUndoRedoButtonStates(),f.refreshPreview=function(){v.refresh(!0)},f.undoManager=p,f.uiManager=g}}},e.prototype.findTags=function(e,n){var t,r=this;e&&(t=l.extendRegExp(e,"","$"),this.before=this.before.replace(t,function(e){return r.startTag=r.startTag+e,""}),t=l.extendRegExp(e,"^",""),this.selection=this.selection.replace(t,function(e){return r.startTag=r.startTag+e,""})),n&&(t=l.extendRegExp(n,"","$"),this.selection=this.selection.replace(t,function(e){return r.endTag=e+r.endTag,""}),t=l.extendRegExp(n,"^",""),this.after=this.after.replace(t,function(e){return r.endTag=e+r.endTag,""}))},e.prototype.trimWhitespace=function(e){var n,t,r=this;e?n=t="":(n=function(e){return r.before+=e,""},t=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,n).replace(/(\s*)$/,t)},e.prototype.skipLines=function(e,n,t){void 0===e&&(e=1),void 0===n&&(n=1),e++,n++;var r,a;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+p.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+p.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+p.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+p.$1,this.before){for(r=a="";e--;)r+="\\n?",a+="\n";t&&(r="\\n*"),this.before=this.before.replace(new p(r+"$",""),a)}if(this.after){for(r=a="";n--;)r+="\\n?",a+="\n";t&&(r="\\n*"),this.after=this.after.replace(new p(r,""),a)}},l.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},l.addEvent=function(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener(n,t,!1)},l.removeEvent=function(e,n,t){e.detachEvent?e.detachEvent("on"+n,t):e.removeEventListener(n,t,!1)},l.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n")},l.extendRegExp=function(e,n,t){(null===n||void 0===n)&&(n=""),(null===t||void 0===t)&&(t="");var r,a=e.toString();return a=a.replace(/\/([gim]*)$/,function(e,n){return r=n,""}),a=a.replace(/(^\/|\/$)/g,""),a=n+a+t,new p(a,r)},c.getTop=function(e,n){var t=e.offsetTop;if(!n)for(;e=e.offsetParent;)t+=e.offsetTop;return t},c.getHeight=function(e){return e.offsetHeight||e.scrollHeight},c.getWidth=function(e){return e.offsetWidth||e.scrollWidth},c.getPageSize=function(){var e,n,t,r;self.innerHeight&&self.scrollMaxY?(e=d.body.scrollWidth,n=self.innerHeight+self.scrollMaxY):d.body.scrollHeight>d.body.offsetHeight?(e=d.body.scrollWidth,n=d.body.scrollHeight):(e=d.body.offsetWidth,n=d.body.offsetHeight),self.innerHeight?(t=self.innerWidth,r=self.innerHeight):d.documentElement&&d.documentElement.clientHeight?(t=d.documentElement.clientWidth,r=d.documentElement.clientHeight):d.body&&(t=d.body.clientWidth,r=d.body.clientHeight);var a=Math.max(e,t),i=Math.max(n,r);return[a,i,t,r]},u.createBackground=function(){var e=d.createElement("div"),n=e.style;e.className="wmd-prompt-background",n.position="absolute",n.top="0",n.zIndex="1000",g.isIE?n.filter="alpha(opacity=50)":n.opacity="0.5";var t=c.getPageSize();return n.height=t[1]+"px",g.isIE?(n.left=d.documentElement.scrollLeft,n.width=d.documentElement.clientWidth):(n.left="0",n.width="100%"),d.body.appendChild(e),e},u.prompt=function(e,n,t){var r,a;void 0===n&&(n="");var i=function(e){var n=e.charCode||e.keyCode;27===n&&o(!0)},o=function(e){l.removeEvent(d.body,"keydown",i);var n=a.value;return e?n=null:(n=n.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(n)||(n="http://"+n)),r.parentNode.removeChild(r),t(n),!1},s=function(){r=d.createElement("div"),r.className="wmd-prompt-dialog",r.style.padding="10px;",r.style.position="fixed",r.style.width="400px",r.style.zIndex="1001";var t=d.createElement("div");t.innerHTML=e,t.style.padding="5px",r.appendChild(t);var s=d.createElement("form"),u=s.style;s.onsubmit=function(){return o(!1)},u.padding="0",u.margin="0",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",r.appendChild(s),a=d.createElement("input"),a.type="text",a.value=n,u=a.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",s.appendChild(a);
var p=d.createElement("input");p.type="button",p.onclick=function(){return o(!1)},p.value="OK",u=p.style,u.margin="10px",u.display="inline",u.width="7em";var f=d.createElement("input");f.type="button",f.onclick=function(){return o(!0)},f.value="Cancel",u=f.style,u.margin="10px",u.display="inline",u.width="7em",s.appendChild(p),s.appendChild(f),l.addEvent(d.body,"keydown",i),r.style.top="50%",r.style.left="50%",r.style.display="block",g.isIE_5or6&&(r.style.position="absolute",r.style.top=d.documentElement.scrollTop+200+"px",r.style.left="50%"),d.body.appendChild(r),r.style.marginTop=-(c.getHeight(r)/2)+"px",r.style.marginLeft=-(c.getWidth(r)/2)+"px"};setTimeout(function(){s();var e=n.length;if(void 0!==a.selectionStart)a.selectionStart=0,a.selectionEnd=e;else if(a.createTextRange){var t=a.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}a.focus()},0)};var w=o.prototype;w.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",w.unwrap=function(e){var n=new p("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(n,"$1 $2")},w.wrap=function(e,n){this.unwrap(e);var t=new p("(.{1,"+n+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(t,function(e,n){return new p("^"+r.prefixes,"").test(e)?e:n+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},w.doBold=function(e,n){return this.doBorI(e,n,2,this.getString("boldexample"))},w.doItalic=function(e,n){return this.doBorI(e,n,1,this.getString("italicexample"))},w.doBorI=function(e,n,t,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var a=/(\**$)/.exec(e.before)[0],i=/(^\**)/.exec(e.after)[0],o=Math.min(a.length,i.length);if(o>=t&&(2!=o||1!=t))e.before=e.before.replace(p("[*]{"+t+"}$",""),""),e.after=e.after.replace(p("^[*]{"+t+"}",""),"");else if(!e.selection&&i){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=p.$1;e.before=e.before+i+s}else{e.selection||i||(e.selection=r);var l=1>=t?"*":"**";e.before=e.before+l,e.after=l+e.after}},w.stripLinkDefs=function(e,n){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,t,r,a,i){return n[t]=e.replace(/\s*$/,""),a?(n[t]=e.replace(/["(](.+?)[")]$/,""),a+i):""})},w.addLinkDef=function(e,n){var t=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var a="",i=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(e){t++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+t+"]:"),a+="\n"+e},s=function(e,n,a,l,c,u){return a=a.replace(i,s),r[c]?(o(r[c]),n+a+l+t+u):e};e.before=e.before.replace(i,s),n?o(n):e.selection=e.selection.replace(i,s);var l=t;return e.after=e.after.replace(i,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+a,l},w.insertLink=function(e,n,t,r,a){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var i;if(!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var o=function(t){i.parentNode.removeChild(i),null!==t&&(e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e.startTag=a?"![":"[",e.endTag="]("+s(t)+")",e.selection=r),n()};return i=u.createBackground(),o(t),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},w.doLinkOrImage=function(e,n,t){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\(.*?\))?/);var r;if(!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var a=this,i=function(i,o){if(r.parentNode.removeChild(r),null!==i&&(e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e.startTag=t?"![":"[",e.endTag="]("+s(i)+")",!e.selection)){var l="";l=o?o:a.getString(t?"imagedescription":"linkdescription"),e.selection=l}n()};return r=u.createBackground(),t?this.hooks.insertImageDialog(i)||u.prompt(this.getString("imagedialog"),v,i):this.hooks.insertLinkDialog(i)||u.prompt(this.getString("linkdialog"),b,i),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},w.doAutoindent=function(e){var n=this,t=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,function(n){return e.selection=n,""}),t=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),t&&(e.after=e.selection+e.after,e.selection="")},w.doBlockquote=function(e){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(n,t,r,a){return e.before+=t,e.after=a+e.after,r}),e.before=e.before.replace(/(>[ \t]*)$/,function(n,t){return e.selection=t+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n,t="",r="";if(e.before){for(var a=e.before.replace(/\n$/,"").split("\n"),i=!1,o=0;o<a.length;o++){var s=!1;n=a[o],i=i&&n.length>0,/^>/.test(n)?(s=!0,!i&&n.length>1&&(i=!0)):s=/^[ \t]*$/.test(n)?!0:i,s?t+=n+"\n":(r+=t+n,t="\n")}/(^|\n)>/.test(t)||(r+=t,t="")}e.startTag=t,e.before=r,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(n){return e.endTag=n,""});var l=function(n){var t=n?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,m.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),l(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),l(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(n,t){return e.startTag+=t,""}))},w.doCode=function(e){var n=/\S[ ]*$/.test(e.before),t=/^[ ]*\S/.test(e.after);if(!t&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(n){return e.selection=n+e.selection,""});var r=1,a=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(r=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(a=0),e.skipLines(r,a),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(e.startTag="    ",e.selection=this.getString("codeexample"))}else e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample")))},w.doList=function(e,n,t){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,a=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,i="-",o=1,s=function(){var e;return t?(e=" "+o+". ",o++):e=" "+i+" ",e},l=function(e){return void 0===t&&(t=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return s()})};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(a,l)),t==c)return}var u=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(i=p.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var d=s(),f=1;e.after=e.after.replace(a,function(e){return f=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(u,f,!0),e.startTag=d;var g=d.replace(/./g," ");this.wrap(e,m.lineLength-g.length),e.selection=e.selection.replace(/\n/g,"\n"+g)},w.doHeading=function(e){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.before&&"\n"!=e.before[e.before.length-1]&&e.skipLines(1,1),e.startTag="# ",e.selection=this.getString("headingexample"),void(e.endTag="");e.findTags(/#+[ ]*/,/[ ]*#+/),e.before&&"\n"!=e.before[e.before.length-1]&&e.skipLines(1,1);var n=0,t=e.startTag;/^#+[ ]*$/.test(t)&&(t=t.replace(/ /g,""),n=t.length);var r=0;if(n>=0&&3>=n&&(r=n+1),n>=4&&(r=0,e.startTag=""),r>0){for(var a="";r--;)a+="#";a+=" ",e.startTag=a}},w.doHorizontalRule=function(e){e.startTag="----------\n",e.selection="",e.skipLines(1,1,!0)}}(),define("pagedown-light",function(){}),define("core",["underscore","crel","constants","utils","eventMgr","shortcutMgr","pagedown-ace","pagedown-light"],function(e,n,t,r,a,i){function o(){l=ace.edit("wmd-input"),MD.aceEditor=l,l.renderer.setShowGutter(!1),l.renderer.setPrintMarginColumn(!1),l.renderer.setPadding(t.EDITOR_DEFAULT_PADDING),l.session.setUseWrapMode(!0),l.session.setNewLineMode("unix"),l.session.setMode("ace/mode/ace_mode"),l.session.$selectLongWords=!0,function(n){function t(t){var r=n.lines[t];0!==r.length&&0===r[0].type.indexOf("markup.heading.multi")&&e.each(n.lines[t-1],function(e){e.type="markup.heading.prev.multi"})}function r(){if(n.running){for(var e=new Date,a=n.currentLine,i=-1,o=n.doc;n.lines[a];)a++;var s=a,l=o.getLength(),c=0;for(n.running=!1;l>a;){n.$tokenizeRow(a),i=a;do t(a),a++;while(n.lines[a]);if(c++,c%5===0&&new Date-e>20)return n.running=setTimeout(r,20),void(n.currentLine=a)}n.currentLine=a,i>=s&&n.fireUpdateEvent(s,i)}}n.$worker=function(){n.lines.splice(0,n.lines.length),n.states.splice(0,n.states.length),n.currentLine=0,r()}}(l.session.bgTokenizer),i.configureAce(l),a.onAceCreated(l)}var s={};window.MD={eventMgr:a};var l,c,u,d,p,f,m,g,h,v,b,w,x,y=$('<div class="modal fade modal-insert-link"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+getMsg("Hyperlink")+'</h4></div><div class="modal-body"><p>'+getMsg("Please provide the link URL and an optional title")+':</p><div class="input-group"><span class="input-group-addon"><i class="fa fa-link"></i></span><input id="input-insert-link" type="text" class="col-sm-5 form-control" placeholder="http://example.com  '+getMsg("optional title")+'"></div></div><div class="modal-footer"><a href="#" class="btn btn-default" data-dismiss="modal">'+getMsg("Cancel")+'</a> <a href="#" class="btn btn-primary action-insert-link" data-dismiss="modal">'+getMsg("OK")+"</a></div></div></div></div>"),C=y.find(".action-insert-link");return s._resetToolBar=function(){$("#wmd-button-row").remove(),$("#wmd-button-bar .wmd-button-bar-inner").html('<ul class="nav left-buttons"><li class="wmd-button-group1 btn-group"></li></ul><ul class="nav left-buttons"><li class="wmd-button-group2 btn-group"></li></ul><ul class="nav left-buttons"><li class="wmd-button-group3 btn-group"></li></ul><ul class="nav left-buttons"><li class="wmd-button-group4 btn-group"></li></ul><ul class="nav left-buttons"><li class="wmd-button-group6 btn-group"></li><li class="wmd-button btn btn-success" id="wmd-help-button" title="'+getMsg("Markdown syntax")+'" style="left:0;display:none"><span style="display:none;background-position:0 0"></span><i class="fa fa-question-circle"></i></li></ul>')},s._setEditorHook=function(){m.hooks.set("insertLinkDialog",function(e){return s.insertLinkCallback=e,r.resetModalInputs(),y.modal(),!0}),m.hooks.set("insertImageDialog",function(e){if(s.insertLinkCallback=e,s.catchModal)return!0;r.resetModalInputs();var n=$("#leauiIfrForMD");return n.attr("src")||n.attr("src","/album/index?md=1"),$(".modal-insert-image").modal(),!0}),m.hooks.chain("onPreviewRefresh",a.onAsyncPreview)},s._moveCursorTo=function(e,n){if(!window.lightMode)return void l.moveCursorTo(e,n);var t=s._getTextareaCursorOffset(e,n);$("#wmd-input").get(0).setSelectionRange(t,t),$("#wmd-input").focus()},s._getTextareaCusorPosition=function(){var e=$("#wmd-input").get(0).selectionStart;if(0==e)return{row:0,column:0};for(var n=MD.getContent()||"",t=n.split("\n"),r=0,a=0,r=0;r<t.length;++r){var i=t[r];if(e<=i.length){a=e;break}e-=i.length,e--}return{row:r,column:a}},s._getTextareaCursorOffset=function(e,n){for(var t=0,r=MD.getContent(),a=r.split("\n"),t=0,i=0;i<a.length&&e>i;++i)t+=a[i].length+1;return t+=n,t+1},s.initLightEditor=function(){if(!window.lightMode){var e,n;l?(e=l.renderer.getScrollTop(),n=l.getCursorPosition()):(e=0,n=0);var t=MD.getContent();s._resetToolBar(),l&&l.destroy(),$("#wmd-input").replaceWith(function(){return $('<textarea id="wmd-input" class="ace_editor ace-tm wmd-textarea">').addClass(this.className).addClass("form-control")}),s._pre(),m=new Markdown.EditorLight(w),s._setEditorHook(),m.run(b),s._setToolBars(),g.val(t),window.lightMode=!0,l=null,MD.clearUndo(),a.onToggleMode(m),s._moveCursorTo(n.row,n.column),g.focus(),$("#wmd-input").scrollTop(e)}},s.initAceEditor=function(){if(window.lightMode){var e=$("#wmd-input").scrollTop(),n=s._getTextareaCusorPosition(),r=MD.getContent();s._resetToolBar(),l&&l.destroy(),$("#wmd-input").replaceWith(function(){return'<pre id="wmd-input" class="form-control"><div id="wmd-input-sub" class="editor-content mousetrap" contenteditable=true></div><div class="editor-margin"></div></pre>'}),s._pre(),o(),g.find(".ace_content").css({"background-size":"64px "+Math.round(t.fontSize*(20/12))+"px"}),m=new Markdown.Editor(w,void 0,{keyStrokes:i.getPagedownKeyStrokes()}),s._setEditorHook(),m.run(l,b),s._setToolBars(),l.setValue(r,-1),window.lightMode=!1,MD.clearUndo(),a.onToggleMode(m),s._moveCursorTo(n.row,n.column),l.focus(),l.session.setScrollTop(e)}},s._initMarkdownConvert=function(){w=new Markdown.Converter;var e={_DoItalicsAndBold:function(e){return e=e.replace(/(\*\*|__)(?=\S)(.+?[*_]*)(?=\S)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)(.+?)(?=\S)\1/g,"<em>$2</em>")}};return w.setOptions(e),w},s.initEditor=function(n){function t(){var e=g.val();!window.lightMode&&l&&(e=l.getValue()),void 0!==v&&v!=e&&(h.content=e,a.onContentChanged(h)),v=e}void 0!==h&&a.onFileClosed(h),n||(n={content:""}),h=n,v=void 0;var r=h.content;if(window.lightMode?g.val(r):l.setValue(r,-1),void 0!==m)return window.lightMode||l&&h.editorSelectRange&&l.selection.setSelectionRange(h.editorSelectRange),m.refreshPreview(),MD.$editorElt=g,void(window.lightMode?g.scrollTop(0):e.defer(function(){l.renderer.scrollToY(0)}));var o=$(".preview-container");m=window.lightMode?new Markdown.EditorLight(w):new Markdown.Editor(w,void 0,{keyStrokes:i.getPagedownKeyStrokes()}),s._setEditorHook(),b=function(n){var r=e.debounce(n,500);return function(){void 0===v?(n(),a.onFileOpen(h),o.scrollTop(h.previewScrollTop),window.lightMode?g.scrollTop(h.editorScrollTop):e.defer(function()